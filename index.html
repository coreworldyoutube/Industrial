<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>クラフトゲーム</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            text-align: center;
        }
        .item {
            display: inline-block;
            margin: 10px;
            padding: 10px;
            border: 1px solid #ccc;
            cursor: pointer;
        }
        #result {
            margin-top: 20px;
            font-size: 1.5em;
        }
        .scene {
            display: none;
        }
        .active {
            display: block;
        }
    </style>
</head>
<body>
    <h1>クラフトシステム</h1>
    
    <!-- シーン1: アイテム選択とクラフト -->
    <div id="scene1" class="scene active">
        <div id="inventory">
            <div class="item" data-item="木材">🪵 木材</div>
            <div class="item" data-item="石">🪨 石</div>
            <div class="item" data-item="種">🌱 種</div>
            <div class="item" data-item="水">💧 水</div>
        </div>
        <button id="craftButton">クラフトする</button>
        <div id="craftMessage"></div>
    </div>

    <!-- シーン2: 作成したアイテム表示 -->
    <div id="scene2" class="scene">
        <h2>作成したアイテム</h2>
        <div id="craftedItem">まだアイテムは作成されていません。</div>
        <button onclick="changeScene('scene1')">戻る</button>
    </div>

    <script>
        // 以前作成したアイテムを保存するための配列
        let craftedItems = [];

        // アイテムを選択するためのイベント
        document.querySelectorAll('.item').forEach(item => {
            item.addEventListener('click', () => {
                item.style.backgroundColor = '#d0f0c0'; // アイテムを選択したときの背景色
            });
        });

        // クラフトボタンのイベント
        document.getElementById('craftButton').addEventListener('click', () => {
            const selectedItems = [];
            document.querySelectorAll('.item').forEach(item => {
                if (item.style.backgroundColor === 'rgb(208, 240, 192)') {
                    selectedItems.push(item.dataset.item);
                }
            });

            if (selectedItems.length === 2) {
                const craftedItem = selectedItems.join(" と "); // 作成したアイテムを表示
                craftedItems.push(craftedItem);
                document.getElementById('craftMessage').textContent = '';
                changeScene('scene2');  // 結果シーンに切り替え
                updateCraftedItems(); // 作成したアイテムを更新
            } else {
                document.getElementById('craftMessage').textContent = 'アイテムを2つ選んでください。';
            }

            // アイテム選択をリセット
            document.querySelectorAll('.item').forEach(item => item.style.backgroundColor = '');
        });

        // 作成したアイテムをシーン2に表示
        function updateCraftedItems() {
            const craftedItemDiv = document.getElementById('craftedItem');
            if (craftedItems.length === 0) {
                craftedItemDiv.textContent = 'まだアイテムは作成されていません。';
            } else {
                craftedItemDiv.textContent = '作成したアイテム: ' + craftedItems.join(', ');
            }
        }

        // シーンを切り替える関数
        function changeScene(sceneId) {
            // すべてのシーンを非表示にする
            const scenes = document.querySelectorAll('.scene');
            scenes.forEach(scene => {
                scene.classList.remove('active');
            });

            // 指定されたシーンを表示する
            const sceneToShow = document.getElementById(sceneId);
            sceneToShow.classList.add('active');
        }
    </script>
</body>
</html>
