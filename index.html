<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¯ãƒ©ãƒ•ãƒˆã‚²ãƒ¼ãƒ </title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            text-align: center;
        }
        .item, .resource {
            display: inline-block;
            margin: 10px;
            padding: 10px;
            border: 1px solid #ccc;
            cursor: pointer;
        }
        #result {
            margin-top: 20px;
            font-size: 1.5em;
        }
        .scene {
            display: none;
        }
        .active {
            display: block;
        }
    </style>
</head>
<body>
    <h1>ã‚¯ãƒ©ãƒ•ãƒˆã‚·ã‚¹ãƒ†ãƒ </h1>
    
    <!-- ã‚·ãƒ¼ãƒ³1: è³‡æºé›†ã‚ -->
    <div id="scene1" class="scene active">
        <h2>è³‡æºé›†ã‚</h2>
        <div id="resources">
            <div class="resource" data-resource="æœ¨æ">ğŸªµ æœ¨æ</div>
            <div class="resource" data-resource="çŸ³">ğŸª¨ çŸ³</div>
            <div class="resource" data-resource="æ°´">ğŸ’§ æ°´</div>
        </div>
        <button onclick="changeScene('scene2')">åœ¨åº«ç®¡ç†ã¸</button>
    </div>

    <!-- ã‚·ãƒ¼ãƒ³2: åœ¨åº«ç®¡ç† -->
    <div id="scene2" class="scene">
        <h2>åœ¨åº«ç®¡ç†</h2>
        <div id="inventory">
            <!-- åœ¨åº«ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
        </div>
        <button onclick="changeScene('scene3')">ã‚¯ãƒ©ãƒ•ãƒˆã¸</button>
        <button onclick="changeScene('scene1')">è³‡æºé›†ã‚ã¸æˆ»ã‚‹</button>
    </div>

    <!-- ã‚·ãƒ¼ãƒ³3: ã‚¯ãƒ©ãƒ•ãƒˆ -->
    <div id="scene3" class="scene">
        <h2>ã‚¯ãƒ©ãƒ•ãƒˆ</h2>
        <div id="craftingOptions">
            <!-- ã‚¯ãƒ©ãƒ•ãƒˆã§ãã‚‹ã‚¢ã‚¤ãƒ†ãƒ ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
        </div>
        <button onclick="changeScene('scene2')">åœ¨åº«ç®¡ç†ã¸æˆ»ã‚‹</button>
    </div>

    <script>
        // è³‡æºã®åœ¨åº«
        let inventory = {
            'æœ¨æ': 0,
            'çŸ³': 0,
            'æ°´': 0
        };

        // ã‚¯ãƒ©ãƒ•ãƒˆã§ãã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã®è¨­å®šï¼ˆå¿…è¦è³‡æºï¼‰
        const craftingItems = {
            'æœ¨ã®å‰£': { 'æœ¨æ': 2, 'çŸ³': 1 },
            'çŸ³ã®ãƒ„ãƒ«ãƒã‚·': { 'æœ¨æ': 1, 'çŸ³': 3 }
        };

        // è³‡æºã‚’é›†ã‚ã‚‹
        document.querySelectorAll('.resource').forEach(resource => {
            resource.addEventListener('click', () => {
                const resourceName = resource.dataset.resource;
                inventory[resourceName]++;
                updateInventory();
            });
        });

        // åœ¨åº«ç®¡ç†ã‚·ãƒ¼ãƒ³ã‚’æ›´æ–°
        function updateInventory() {
            const inventoryDiv = document.getElementById('inventory');
            inventoryDiv.innerHTML = '';  // åœ¨åº«ã®å†…å®¹ã‚’ãƒªã‚»ãƒƒãƒˆ

            // åœ¨åº«ã®å†…å®¹ã‚’è¡¨ç¤º
            for (const resource in inventory) {
                const resourceDiv = document.createElement('div');
                resourceDiv.textContent = `${resource}: ${inventory[resource]} å€‹`;
                inventoryDiv.appendChild(resourceDiv);
            }
        }

        // ã‚¯ãƒ©ãƒ•ãƒˆã‚·ãƒ¼ãƒ³ã‚’æ›´æ–°
        function updateCraftingOptions() {
            const craftingDiv = document.getElementById('craftingOptions');
            craftingDiv.innerHTML = '';  // ã‚¯ãƒ©ãƒ•ãƒˆé¸æŠè‚¢ã‚’ãƒªã‚»ãƒƒãƒˆ

            // ã‚¯ãƒ©ãƒ•ãƒˆã§ãã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¡¨ç¤º
            for (const item in craftingItems) {
                const itemRequirements = craftingItems[item];
                let canCraft = true;

                // å¿…è¦è³‡æºãŒè¶³ã‚Šã¦ã„ã‚‹ã‹ã‚’ç¢ºèª
                for (const resource in itemRequirements) {
                    if (inventory[resource] < itemRequirements[resource]) {
                        canCraft = false;
                        break;
                    }
                }

                // ã‚¢ã‚¤ãƒ†ãƒ ã‚’ä½œã‚Œã‚‹å ´åˆã€ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
                if (canCraft) {
                    const craftButton = document.createElement('button');
                    craftButton.textContent = `${item} ã‚’ä½œã‚‹`;
                    craftButton.addEventListener('click', () => craftItem(item, itemRequirements));
                    craftingDiv.appendChild(craftButton);
                }
            }
        }

        // ã‚¢ã‚¤ãƒ†ãƒ ã‚’ã‚¯ãƒ©ãƒ•ãƒˆ
        function craftItem(item, requirements) {
            // å¿…è¦ãªè³‡æºã‚’æ¸›ã‚‰ã™
            for (const resource in requirements) {
                inventory[resource] -= requirements[resource];
            }
            updateInventory();  // åœ¨åº«ã‚’æ›´æ–°
            alert(`${item} ã‚’ä½œæˆã—ã¾ã—ãŸï¼`);
        }

        // ã‚·ãƒ¼ãƒ³ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹é–¢æ•°
        function changeScene(sceneId) {
            // ã™ã¹ã¦ã®ã‚·ãƒ¼ãƒ³ã‚’éè¡¨ç¤ºã«ã™ã‚‹
            const scenes = document.querySelectorAll('.scene');
            scenes.forEach(scene => {
                scene.classList.remove('active');
            });

            // æŒ‡å®šã•ã‚ŒãŸã‚·ãƒ¼ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹
            const sceneToShow = document.getElementById(sceneId);
            sceneToShow.classList.add('active');

            // ã‚¯ãƒ©ãƒ•ãƒˆã‚·ãƒ¼ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹å ´åˆã€ã‚¯ãƒ©ãƒ•ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ›´æ–°
            if (sceneId === 'scene3') {
                updateCraftingOptions();
            }

            // åœ¨åº«ç®¡ç†ã‚·ãƒ¼ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹å ´åˆã€åœ¨åº«ã‚’æ›´æ–°
            if (sceneId === 'scene2') {
                updateInventory();
            }
        }
    </script>
</body>
</html>
